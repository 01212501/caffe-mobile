--- caffe/src/caffe/layers/dropout_layer.cpp	2017-01-27 09:51:56.561122800 +0800
+++ ../src/caffe/layers/dropout_layer.cpp	2017-02-04 22:35:34.654099433 +0800
@@ -35,11 +35,13 @@
   unsigned int* mask = rand_vec_.mutable_cpu_data();
   const int count = bottom[0]->count();
   if (this->phase_ == TRAIN) {
+#ifdef NO_CAFFE_MOBILE
     // Create random numbers
     caffe_rng_bernoulli(count, 1. - threshold_, mask);
     for (int i = 0; i < count; ++i) {
       top_data[i] = bottom_data[i] * mask[i] * scale_;
     }
+#endif
   } else {
     caffe_copy(bottom[0]->count(), bottom_data, top_data);
   }
